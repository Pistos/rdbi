\input texinfo
@setfilename external-api.texi
@settitle RDBI External API specification 1.0 draft

@copying
Copyright @copyright{} 2010 Erik Hollensbe. My dad can distribute this work
better than your dad.
@end copying

@titlepage
@title RDBI External API specification 1.0 draft
@author Erik Hollensbe <erik@@hollensbe.org>
@page
@vskip 0pt plus 1filll
@insertcopying

@end titlepage

@contents
@node Top

@chapter All Classes

@deftypemethod {All Classes} Boolean reload

this method will semantically refresh items, such as Schema objects or
rows, depending on the context of the object in question.

@end deftypemethod

@chapter module DBI

@deftypemethod DBI DBH connect (Class @var{klass}, Array @var{*args}, Proc @var{&block})

class is a ruby class which corresponds to the database driver. it is no longer
a string.

*args is a hash with parameter -> value associations, such as :host or
:username.

Optionally yields a block for usage, yields a freshly connected DBH.

@end deftypemethod

@deftypemethod DBI {Array of Class} drivers

accessor to get at known classes that can be used as drivers.

@end deftypemethod

@deftypemethod DBI DBH connect_cached (Class @var{klass}, Array @var{*args})
	
connect to a new resource if one is required (or desired, see below) with
similar parameters as connect().

additional arguments :pool_name and :pool_size can be used to define a
Pool (object, see below) which holds a specific subset of connected
database handles. Playing with the size here introduces the ability for
connect_cached to maintain a minimum number of connections which can be
re-used over the lifetime of a program.

@end deftypemethod

@deftypemethod DBI Pool pool (String @var{pool_name})

a pool as described above is an array of database handles. this returns
that data as a "Pool" object, with its own API. See later on in the
document.

@end deftypemethod

@deftypemethod DBI Pool all_connections

similar to pool(), this returns all the connections, but ignores pools.

@end deftypemethod

@deftypemethod DBI Integer ping (Class @var{klass}, Array @var{*args})

similar to connect(), this issues a ping to the databases. This may issue
a connect() before the ping() to do it properly depending on the database
implementation.

@end deftypemethod

@deftypemethod DBI Boolean reconnect_all

reconnects all the known database handles.

@end deftypemethod

@deftypemethod DBI DBH last_dbh

returns the last returned dbh from connect() or connect_cached()

this method, by definition, can be unpredictable in threaded environments.

@end deftypemethod

@page
@node Method Index
@unnumbered Method Index
@printindex fn

@bye
